<form autocomplete="off" #form="ngForm" (change)="debug(form)" (ngSubmit)="processFrom(form.value); form.reset();">
  <fieldset>
    <legend>Car Info</legend>
    
      <div class="form-goup col-md-6">
        <input type="hidden" [(ngModel)] = "car.id" name="id">
        <label for="brand">Brand:</label><br>
        <input class="form-control" required type="text" [(ngModel)] = "car.brand" minlength="3" maxlength="50" #brand="ngModel" id="brand" name="brand">
        <div *ngIf="brand.invalid && (brand.touched || brand.dirty)">
          <p *ngIf="brand.errors.required" class="text-danger">Value is required</p>
          <p *ngIf="brand.errors.maxlength" class="text-danger">Max length is {{ brand.errors.maxlength.requiredLength }} chars</p>
          <p *ngIf="brand.errors.minlength" class="text-danger">Min length is {{ brand.errors.minlength.requiredLength }} chars</p>
        </div>
      </div>

      <div class="form-group col-md-6">
        <label for="model">Model:</label><br>
        <input class="form-control" required type="text" minlength="3" maxlength="50" #model="ngModel" [(ngModel)] = "car.model" id="model" name="model">
        <div *ngIf="model.invalid && (model.touched || model.dirty)">
          <p *ngIf="model.errors.required" class="text-danger">Value is required</p>
          <p *ngIf="model.errors.maxlength" class="text-danger">Max length is {{ model.errors.maxlength.requiredLength }} chars</p>
          <p *ngIf="model.errors.minlength" class="text-danger">Min length is {{ model.errors.minlength.requiredLength }} chars</p>
        </div>
      </div>
 
      <div class="form-group col-sm-4">
        <label for="year">Year:</label><br>
        <input class="form-control" required type="number" [(ngModel)] = "car.year" #year="ngModel" id="year" name="year">
        <div *ngIf="year.invalid && (year.touched || year.dirty)">
          <p *ngIf="year.errors.required" class="text-danger">Value is required</p>
        </div>
      </div>

      <div class="form-group col-sm-4">
        <label for="price">Price:</label><br>
        <input class="form-control" required type="number" [(ngModel)] = "car.price" #price="ngModel" id="price" name="price">
        <div *ngIf="price.invalid && (price.touched || price.dirty)">
          <p *ngIf="price.errors.required" class="text-danger">Value is required</p>
        </div>
      </div>

      <div class="form-group col-sm-4">
        <label for="km">Kilometers:</label><br>
        <input class="form-control" required type="number" [(ngModel)] = "car.km" #km="ngModel" id="km" name="km">
        <div *ngIf="km.invalid && (km.touched || km.dirty)">
          <p *ngIf="km.errors.required" class="text-danger">Value is required</p>
        </div>
      </div>

      <div class="clearfix"></div>

  </fieldset>
  <fieldset ngModelGroup="engine">
    <legend>Engine</legend>
    <div class="form-group col-md-12">
      <label for="fuel">Fuel</label>
      <select class="form-control" required [(ngModel)] = "car.engine.fuel" #fuel="ngModel" name="fuel" id="fuel">
        <option value="">-- Empty --</option>
        <option value="petrol">Petrol</option>
        <option value="diesel">Diesel</option>
        <option value="electric">Electric</option>
          <div *ngIf="fuel.invalid && (fuel.touched || fuel.dirty)">
            <p *ngIf="fuel.errors.required" class="text-danger">Value is required</p>
          </div>
      </select>
    </div>
    <div class="form-group col-md-6">
      <label for="power">Power:</label><br>
      <input class="form-control" required type="number" max="200" [(ngModel)] = "car.engine.power" #power="ngModel" id="power" name="power">
      <div *ngIf="power.invalid && (power.touched || power.dirty)">
        <p *ngIf="power.errors.required" class="text-danger">Value is required</p>
        <p *ngIf="power.errors.max" class="text-danger">Max value has to be 200</p>
      </div>
    </div>

    <div class="form-group col-md-6">
      <label for="consumption">Consumption:</label><br>
      <input class="form-control" required type="number" max="20" [(ngModel)] = "car.engine.consumption" #consumption="ngModel" id="consumption" name="consumption">
      <div *ngIf="consumption.invalid && (consumption.touched || consumption.dirty)">
        <p *ngIf="consumption.errors.required" class="text-danger">Value is required</p>
        <p *ngIf="consumption.errors.max" class="text-danger">Max value has to be 20</p>
      </div>
      </div>


  </fieldset>

  <div class="btn-group">
    <button class="btn btn-primary" [disabled]= "form.invalid" type="submit">{{ isAddAction(car.id) ? 'Add Car' : 'Edit Car'}}</button>
    <button class="btn btn-danger" type="reset">Reset</button>
  </div>

</form>

{{ form.value | json }}